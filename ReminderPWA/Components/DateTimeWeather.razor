@using ReminderTabletNew2.Models
@using System.Globalization

<div class="header-section">
    <div class="time-container">
        <div class="date-text">@GetFinnishDate()</div>
        
        <div class="time-main">
            <div class="main-time">@CurrentTime.ToString("HH:mm")</div>
            <div class="time-period">@TimeOfDayText</div>
        </div>
        
        @* SÃ¤Ã¤tieto kellonaika-alueen sisÃ¤llÃ¤ alaosassa *@
        <div class="weather-compact">
            @if (Weather != null)
            {
                <span class="weather-icon">@GetWeatherIcon(Weather.Description)</span>
                <div class="weather-info">
                    <span class="weather-temp">@Weather.Temperature</span>
                    <span class="weather-desc">@Weather.Description</span>
                </div>
            }
            else
            {
                <span class="weather-icon">ğŸŒ¤ï¸</span>
                <div class="weather-info">
                    <span class="weather-temp">22Â°C</span>
                    <span class="weather-desc">Pilvinen</span>
                </div>
            }
        </div>
    </div>
</div>

@code {
    [Parameter] public required DateTime CurrentTime { get; set; }
    [Parameter] public required string TimeOfDayText { get; set; }
    [Parameter] public Weather? Weather { get; set; }

    private string GetFinnishDate()
    {
        // Manuaaliset kÃ¤Ã¤nnÃ¶kset varmistaaksemme suomenkielisyyden
        var finnishDays = new[] { "Sunnuntai", "Maanantai", "Tiistai", "Keskiviikko", "Torstai", "Perjantai", "Lauantai" };
        var finnishMonths = new[] { "", "tammikuu", "helmikuu", "maaliskuu", "huhtikuu", "toukokuu", "kesÃ¤kuu", 
                                   "heinÃ¤kuu", "elokuu", "syyskuu", "lokakuu", "marraskuu", "joulukuu" };
        
        var dayName = finnishDays[(int)CurrentTime.DayOfWeek];
        var monthName = finnishMonths[CurrentTime.Month];
        
        return $"{dayName} {CurrentTime.Day}. {monthName} {CurrentTime.Year}";
    }

    private string GetWeatherIcon(string? description)
    {
        if (string.IsNullOrEmpty(description)) return "ğŸŒ¤ï¸";
        
        var desc = description.ToLower();
        
        // Paremmat ja vÃ¤rikkÃ¤Ã¤mmÃ¤t ikonit
        if (desc.Contains("aurinko") || desc.Contains("kirkas") || desc.Contains("selkeÃ¤")) return "â˜€ï¸";
        if (desc.Contains("loistava") || desc.Contains("upea")) return "ğŸŒ";
        if (desc.Contains("pilvi") || desc.Contains("pilvinen")) return "â›…";
        if (desc.Contains("sade") || desc.Contains("sateinen")) return "ğŸŒ¦ï¸";
        if (desc.Contains("lumi") || desc.Contains("luminen")) return "ğŸŒ¨ï¸";
        if (desc.Contains("usva") || desc.Contains("sumu")) return "ğŸŒ«ï¸";
        if (desc.Contains("myrsky") || desc.Contains("ukkonen")) return "â›ˆï¸";
        if (desc.Contains("tuuli") || desc.Contains("tuulinen")) return "ğŸŒ¬ï¸";
        if (desc.Contains("kylmÃ¤") || desc.Contains("pakkanen")) return "ğŸ¥¶";
        if (desc.Contains("kuuma") || desc.Contains("helle")) return "ğŸ”¥";
        
        return "ğŸŒ¤ï¸";
    }
}